#include <iostream>
#include<iomanip>
#include <ctime>

using namespace std;
int emp_num, id ,total_emp=0;
int choice;
//diclaring the stucture date
struct date{
    int dd,mm,yyy;
};

//diclaring the structure paymenent
struct payment{
  float basicSalary;
    float overTime;
    float incomeTax;
    float netPay;
    };

//diclaring the structure address
struct address{
  string city, phoneNumber;
};
//diclaring the variable Employee
struct Employee{
  string full_name, edu_level, category;
  int age;
  int phon_num, empId, experience;
  //string category;
  char sex;
    date currentDate, startingDate;
    payment pay;
    address empAddress;
}temp;
//function diclation

Employee dataIn(Employee emp[]);
Employee dataDisp(Employee *emp);
void Search(Employee *emp);
void update(Employee *emp);
void Delete(Employee* emp);
Employee Sort(Employee emp[]);
void menu();

int main()
{
    menu();
    return 0;
}

void menu()
{
system("cls");
    menustart:
    
    Employee emp[5000];
    
    cout<< "\t\t\t******************************************************************\n";
    cout<< "\t\t\t//////////     Employee management system         ///////////////\n";
    cout<< "\t\t\t******************************************************************\n";
    
    cout<<"\t\t\t1.Add Record\n";
    cout<<"\t\t\t2.Display Record\n";
    cout<<"\t\t\t3.Modify Record\n";
    cout<<"\t\t\t4.Delete Record\n";
    cout<<"\t\t\t5.Search Record\n";
    cout<<"\t\t\t6.Sort record\n";
    cout<<"\t\t\t7.Statstics \n";
    cout<<"\t\t\t8.Pension Employees \n";
    cout<<"\t\t\t0.Exit \n";
    cout<< "\t\t\tchoice option:[1/2/3/4/5/6/7/8/0]\n";
    cout<< "\t\t\tEnter your choice: ";
    int choice;
    cin>>choice;

    switch(choice){
        case 1:
             dataIn(emp);
             system("cls");
             goto menustart;
             break;
        case 2:
             dataDisp(emp);
             break;
        case 3:
             update(emp);
             break;
        case 4:
            Delete(emp);
            break;
        case 5:
            Search(emp);
            break;
        case 6:
            Sort(emp);
            cout<< "\t\t\tyour command is done successfully \n display the data to see rank of the employee\n";
            break;
        case 7:
           statstics(emp);
            break;
        case 8:
             pension(emp);
             break; 
        case 0:
            goto a;
            break;
         default : cout<<"Invalid choice...Try again...";
         }
        cout<< "\n\t\t\tdo you want to continue? y/n: ";
        char menus;
        cin>> menus;
        if (menus == 'y' || menus == 'Y'){
        system("cls");
        cout<< endl<<endl;
        goto menustart;
        a: system("exit");
        }
}

Employee dataIn(Employee *emp)
{

    for (int i=total_emp; i<emp_num + total_emp; i++){
    cout<< "insert the detail of Employee : \n";
      emp[i].empId = i+1;
    cout<< "Enter the name of the user: "<< endl;
      cin.ignore();
      getline(cin,emp[i].full_name);
    cout<<"enter age : ";
      cin>>emp[i].age;
a: cout<<"enter sex 'm' or 'f' : ";
      cin>>emp[i].sex;
      if(emp[i].sex!='m' && emp[i].sex!='f'){
        cout<<"invalid input \n";
        goto a;}
    cout<< "Enter your start date in the organization for employee: "<< emp[i].empId;
    cout<< "\n date: ";
      cin>>emp[i].startingDate.dd;
    cout<< "\n month: ";
      cin>> emp[i].startingDate.mm;
    cout<< "\n year: ";
      cin>> emp[i].startingDate.yyy;
    cout<<"Basic salary : ";
       cin>>emp[i].pay.basicSalary;
    cout<<"over time : ";
      cin>>emp[i].pay.overTime;
    cout<<"address : ";
      cin>>emp[i].empAddress.city;
    cout<<"phone number : ";
      cin>>emp[i].empAddress.phoneNumber;
    }

    total_emp += emp_num;
    return *emp;
}

Employee dataDisp(Employee *emp)
{
    cout<<setw(2)<<"ID"<<setw(15)<<"Name"<<setw(15)<< "SEX"<<setw(15)<<"AGE"<< setw(15)<<"EXPERIENCE"<<setw(15)<<"SALARY"<<endl;

    for (int i=0; i<total_emp; i++){
    emp[i].empId = i+1;
    //emp[i].experience =currentDate.yy - emp[i].Date.yy;
    cout<<emp[i].empId<< setw(15)<<emp[i].full_name<< setw(15)<<emp[i].sex<< setw(15)<<emp[i].age<<setw(15)
    <<emp[i].pay.basicSalary<<endl;
    }


    return *emp;
}

void Delete(Employee* emp)
{
    if(total_emp!=0){
      char select;
   cout<<"\nPress 1 to delete all records !!\n";
   cout<<"\nPress 2 to delete specific record !!\n";
   cin>>select;
      //select=getch();
      if(select=='1'){
    total_emp=0;
    cout<<"\nAll records are deleted...!!! \n";
      }
      else if(select=='2'){
    cout<<"\nEnter the id number of an employee you want to delete : ";
          cin>>id;
  for(int i=0;i<total_emp;i++){
   if(id==emp[i].empId){
  emp[i].full_name="--";
  emp[i].age=0;
  emp[i].pay.basicSalary=0;
  emp[i].sex='-';
  emp[i].startingDate.dd=0;
  emp[i].startingDate.mm=0;
  emp[i].startingDate.yyy=0;
  emp[i].pay.overTime=0;
  emp[i].empAddress.city="--";
  emp[i].empAddress.phoneNumber="---";
  //emp[i].edu_level="--";
  //emp[i].id="--";
      }
   }

   }
    }
    else
  cout<<"\nYour record is empty \n";
}

//upding function to change specific item by searching by employee id

void update(Employee *emp)
{ if(total_emp!=0){
    cout<<"\n\tEnter the id number of an employee you want to update : ";
      cin>>id;
    for(int i=0;i<total_emp;i++){
	 if(id==emp[i].empId){
       for (int i=total_emp; i<emp_num + total_emp; i++){
    cout<< "insert the detail of Employee : \n";
      emp[i].empId = i+1;
    cout<< "Enter the name of the user: "<< endl;
      cin.ignore();
      getline(cin,emp[i].full_name);
    cout<<"enter age : ";
      cin>>emp[i].age;
a: cout<<"enter sex 'm' or 'f' : ";
      cin>>emp[i].sex;
      if(emp[i].sex!='m' && emp[i].sex!='f'){
        cout<<"invalid input \n";
        goto a;}
    cout<< "Enter your start date in the organization for employee: "<< emp[i].empId;
    cout<< "\n date: ";
      cin>>emp[i].startingDate.dd;
    cout<< "\n month: ";
      cin>> emp[i].startingDate.mm;
    cout<< "\n year: ";
      cin>> emp[i].startingDate.yyy;
    cout<<"Basic salary : ";
       cin>>emp[i].pay.basicSalary;
    cout<<"over time : ";
      cin>>emp[i].pay.overTime;
    cout<<"address : ";
      cin>>emp[i].empAddress.city;
    cout<<"phone number : ";
      cin>>emp[i].empAddress.phoneNumber;
    cout<<"\nSuccessfully Updated!!\n";
	 }
	 }
}
}
else
    cout<<"\nYour record is empty \n";
}

//searching function work by employee id 

void Search(Employee *emp)
{
    if(total_emp!=0){
    cout<<"\nEnter the id number of an employee you want to search : ";
      cin>>id;

    cout<<setw(2)<<"ID"<<setw(15)<<"Name"<<setw(15)<< "SEX"<<setw(15)<<"AGE"<< setw(15)<<"EXPERIENCE"<<setw(15)<<"SALARY"<<endl;
    for(int i=0;i<total_emp;i++){
	 if(id==emp[i].empId){
    cout<<emp[i].empId<< setw(15)<<emp[i].full_name<< setw(15)<<emp[i].sex<< setw(15)<<emp[i].age<<setw(15)
    <<emp[i].pay.basicSalary<<endl;
	 }
}
    }
    else
        cout<<"no recored is found \n";
}

Employee Sort(Employee *emp)
{
 for(int i=0; i<total_emp; i++){
    for(int j=total_emp - 1; j>=i; j--){
            if (emp[i].pay.basicSalary<emp[j].pay.basicSalary){
             temp = emp[i];
            emp[i] = emp[j];
            emp[j] = temp;
            }
        }
    }
 return *emp;
}

